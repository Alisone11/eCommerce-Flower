{"version":3,"file":"js/49.d7c4424f.js","mappings":"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","sources":["webpack://finalproject/./src/views/UserCheckout.vue","webpack://finalproject/./src/views/UserCheckout.vue?0c02"],"sourcesContent":["<template>\n  <LoadingCom :active=\"isLoading\"></LoadingCom>\n  <h4 class=\"mb-5 text-center\">請確認以下資料是否正確</h4>\n  <form class=\"row\" @submit.prevent=\"checkout\">\n    <div class=\"col-sm-8 mx-auto\">\n      <span class=\"bg-primary py-2 px-4 fw-bold rounded-top text-light\">購物明細</span>\n      <table class=\"table border border-3 border-primary mt-1 mb-5\">\n      <thead>\n        <tr>\n          <th scope=\"col\" width=\"150\">商品</th>\n          <th scope=\"col\">名稱</th>\n          <th scope=\"col\">數量</th>\n          <th scope=\"col\">小計</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in order.products\" :key=\"item.id\">\n          <td>\n            <div :style=\"{ backgroundImage: `url(${item.product.imageUrl})`}\"\n            style=\"height: 100px; background-position: center; background-size: cover;\"></div>\n          </td>\n          <td>{{ item.product.title }}</td>\n          <td>{{ item.qty }}</td>\n          <td class=\"text-end\">{{ $filters.currency(item.total) }}</td>\n        </tr>\n      </tbody>\n      <tfoot>\n        <tr>\n          <td colspan=\"3\" class=\"fw-bold text-end\">\n            <p>折扣</p>\n            <p>總金額</p>\n          </td>\n          <td class=\"fw-bold text-end\">\n            <p>- {{ $filters.currency(discount) }}</p>\n            <p>{{ $filters.currency(order.total) }}</p>\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n    <span class=\"bg-primary py-2 px-4 fw-bold rounded-top text-light\">收件人資料</span>\n      <table class=\"table border border-3 border-primary mt-1\">\n      <tbody>\n        <tr>\n          <th scope=\"col\">姓名</th>\n          <td>{{ order.user.name }}</td>\n        </tr>\n        <tr>\n          <th scope=\"col\">電話</th>\n          <td>{{ order.user.tel }}</td>\n        </tr>\n        <tr>\n          <th scope=\"col\">Email</th>\n          <td>{{ order.user.email }}</td>\n        </tr>\n        <tr>\n          <th scope=\"col\">地址</th>\n          <td>{{ order.user.address }}</td>\n        </tr>\n        <tr>\n          <th scope=\"col\">備註</th>\n          <td>{{ order.message }}</td>\n        </tr>\n      </tbody>\n    </table>\n      <div class=\"text-end\">\n      <button type=\"submit\" class=\"btn btn-primary text-light mt-4\">確認結帳</button>\n      </div>\n    </div>\n  </form>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      order: { user: {} },\n      orderId: '',\n      isLoading: false\n    }\n  },\n  created () {\n    this.orderId = this.$route.params.orderId\n    this.getOrder()\n  },\n  methods: {\n    getOrder () {\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/order/${this.orderId}`\n      this.axios.get(api).then((res) => {\n        console.log('getOrder', res)\n        this.order = res.data.order\n      })\n    },\n    checkout () {\n      this.isLoading = true\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/pay/${this.orderId}`\n      this.axios.post(api).then((res) => {\n        console.log('checkout', res)\n        this.isLoading = false\n        this.PushMessageState(res, '付款')\n        this.$router.push('/user/home')\n      })\n    }\n  },\n  computed: {\n    discount () {\n      let originTotal = 0\n      const order = Object.values(this.order.products)\n      order.forEach(data => {\n        originTotal += data.total\n      })\n      return originTotal - this.order.total\n    }\n  },\n  inject: ['emitter', 'PushMessageState']\n}\n</script>\n","import { render } from \"./UserCheckout.vue?vue&type=template&id=68f7a128\"\nimport script from \"./UserCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./UserCheckout.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/minahu/Documents/front-end engineer/GitHub/vue-assignment/finalproject/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","scope","width","colspan","type","_createVNode","_component_LoadingCom","active","$data","_hoisted_1","onSubmit","$options","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementBlock","_Fragment","products","item","key","id","style","backgroundImage","product","imageUrl","title","qty","_hoisted_6","_ctx","currency","total","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","user","name","_hoisted_12","tel","_hoisted_13","email","_hoisted_14","address","_hoisted_15","message","_hoisted_16","data","order","orderId","isLoading","created","this","$route","params","getOrder","methods","api","axios","get","then","res","console","log","checkout","post","PushMessageState","$router","push","computed","discount","originTotal","Object","values","forEach","inject","__exports__","render"],"sourceRoot":""}