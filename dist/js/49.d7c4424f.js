"use strict";(self["webpackChunkfinalproject"]=self["webpackChunkfinalproject"]||[]).push([[49],{3049:function(t,e,r){r.r(e),r.d(e,{default:function(){return I}});var o=r(3396),l=r(9242),s=r(7139);const d=(0,o._)("h4",{class:"mb-5 text-center"},"請確認以下資料是否正確",-1),n={class:"col-sm-8 mx-auto"},c=(0,o._)("span",{class:"bg-primary py-2 px-4 fw-bold rounded-top text-light"},"購物明細",-1),u={class:"table border border-3 border-primary mt-1 mb-5"},a=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{scope:"col",width:"150"},"商品"),(0,o._)("th",{scope:"col"},"名稱"),(0,o._)("th",{scope:"col"},"數量"),(0,o._)("th",{scope:"col"},"小計")])],-1),i={class:"text-end"},h=(0,o._)("td",{colspan:"3",class:"fw-bold text-end"},[(0,o._)("p",null,"折扣"),(0,o._)("p",null,"總金額")],-1),p={class:"fw-bold text-end"},_=(0,o._)("span",{class:"bg-primary py-2 px-4 fw-bold rounded-top text-light"},"收件人資料",-1),b={class:"table border border-3 border-primary mt-1"},g=(0,o._)("th",{scope:"col"},"姓名",-1),m=(0,o._)("th",{scope:"col"},"電話",-1),w=(0,o._)("th",{scope:"col"},"Email",-1),f=(0,o._)("th",{scope:"col"},"地址",-1),y=(0,o._)("th",{scope:"col"},"備註",-1),x=(0,o._)("div",{class:"text-end"},[(0,o._)("button",{type:"submit",class:"btn btn-primary text-light mt-4"},"確認結帳")],-1);function v(t,e,r,v,k,z){const $=(0,o.up)("LoadingCom");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)($,{active:k.isLoading},null,8,["active"]),d,(0,o._)("form",{class:"row",onSubmit:e[0]||(e[0]=(0,l.iM)(((...t)=>z.checkout&&z.checkout(...t)),["prevent"]))},[(0,o._)("div",n,[c,(0,o._)("table",u,[a,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(k.order.products,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("td",null,[(0,o._)("div",{style:(0,s.j5)([{backgroundImage:`url(${e.product.imageUrl})`},{height:"100px","background-position":"center","background-size":"cover"}])},null,4)]),(0,o._)("td",null,(0,s.zw)(e.product.title),1),(0,o._)("td",null,(0,s.zw)(e.qty),1),(0,o._)("td",i,(0,s.zw)(t.$filters.currency(e.total)),1)])))),128))]),(0,o._)("tfoot",null,[(0,o._)("tr",null,[h,(0,o._)("td",p,[(0,o._)("p",null,"- "+(0,s.zw)(t.$filters.currency(z.discount)),1),(0,o._)("p",null,(0,s.zw)(t.$filters.currency(k.order.total)),1)])])])]),_,(0,o._)("table",b,[(0,o._)("tbody",null,[(0,o._)("tr",null,[g,(0,o._)("td",null,(0,s.zw)(k.order.user.name),1)]),(0,o._)("tr",null,[m,(0,o._)("td",null,(0,s.zw)(k.order.user.tel),1)]),(0,o._)("tr",null,[w,(0,o._)("td",null,(0,s.zw)(k.order.user.email),1)]),(0,o._)("tr",null,[f,(0,o._)("td",null,(0,s.zw)(k.order.user.address),1)]),(0,o._)("tr",null,[y,(0,o._)("td",null,(0,s.zw)(k.order.message),1)])])]),x])],32)],64)}r(7658);var k={data(){return{order:{user:{}},orderId:"",isLoading:!1}},created(){this.orderId=this.$route.params.orderId,this.getOrder()},methods:{getOrder(){const t=`https://vue3-course-api.hexschool.io/api/alisonhu-api/order/${this.orderId}`;this.axios.get(t).then((t=>{console.log("getOrder",t),this.order=t.data.order}))},checkout(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/alisonhu-api/pay/${this.orderId}`;this.axios.post(t).then((t=>{console.log("checkout",t),this.isLoading=!1,this.PushMessageState(t,"付款"),this.$router.push("/user/home")}))}},computed:{discount(){let t=0;const e=Object.values(this.order.products);return e.forEach((e=>{t+=e.total})),t-this.order.total}},inject:["emitter","PushMessageState"]},z=r(89);const $=(0,z.Z)(k,[["render",v]]);var I=$}}]);
//# sourceMappingURL=49.d7c4424f.js.map