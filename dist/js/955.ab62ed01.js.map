{"version":3,"file":"js/955.ab62ed01.js","mappings":"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","sources":["webpack://finalproject/./src/views/UserCart.vue","webpack://finalproject/./src/views/UserCart.vue?698a"],"sourcesContent":["<template>\n  <LoadingCom :active=\"isLoading\"></LoadingCom>\n  <table class=\"table\">\n  <thead>\n    <tr>\n      <th scope=\"col\" width=\"200\">圖片</th>\n      <th scope=\"col\">產品名稱</th>\n      <th scope=\"col\" width=\"100\">數量</th>\n      <th scope=\"col\" width=\"150\">單價</th>\n      <th scope=\"col\"></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr v-for=\"item in carts\" :key=\"item.id\">\n      <td>\n        <a href=\"javascript:;\" @click.prevent=\"getProduct (item.product.id)\">\n          <div :style=\"{ backgroundImage: `url(${item.product.imageUrl})`}\"\n          style=\"height: 150px\" class=\"bg-center\"></div>\n        </a>\n      </td>\n      <td>{{ item.product.title }}</td>\n      <td>\n        <div class=\"input-group input-group-sm\">\n          <input type=\"number\" class=\"form-control\" min=\"1\"\n                :disabled=\"item.id === loadingItem\"\n                @change=\"updateCart(item)\"\n                v-model.number=\"item.qty\">\n          <div class=\"input-group-text\">/ {{ item.product.unit }}</div>\n        </div>\n      </td>\n      <td class=\"text-end\">\n      <p>{{ $filters.currency(item.product.price) }}</p>\n      </td>\n      <td>\n        <a href=\"javascript:;\" class=\"text-danger h5\" @click.prevent=\"delCart(item)\"><i class=\"bi bi-x-circle\"></i></a>\n      </td>\n    </tr>\n  </tbody>\n  <tfoot>\n    <tr>\n      <td colspan=\"3\">\n        <p class=\"fw-bold text-end\">小計</p>\n        <p class=\"text-end\" v-if=\"cart.final_total !== cart.total\">\n          <span class=\"bg-success text-light p-1 rounded\">已套用優惠券:\n          <span class=\"fw-bold\">{{ carts[0].coupon.title }}</span></span>\n          <span class=\"fw-bold ms-2 text-success\">折抵</span></p>\n        <p class=\"fw-bold text-end\">總額</p>\n      </td>\n      <td>\n        <p class=\"text-end\">{{ $filters.currency(cart.total) }}</p>\n        <p class=\"fw-bold text-end text-success\" v-if=\"cart.final_total !== cart.total\" >- {{ $filters.currency(cart.total-cart.final_total) }}</p>\n        <p class=\"text-end\">{{ $filters.currency(cart.final_total) }}</p>\n      </td>\n    </tr>\n  </tfoot>\n</table>\n  <div class=\"input-group input-group-sm\">\n    <input type=\"text\" class=\"form-control\" placeholder=\"請輸入優惠碼\" v-model.lazy=\"code\" @keyup.enter=\"useCoupon\">\n    <div class=\"input-group-text\">\n      <button class=\"btn btn-outline-secondary\" type=\"button\" @click.prevent=\"useCoupon\">\n        套用優惠碼\n      </button>\n    </div>\n  </div>\n  <div class=\"text-end\">\n    <button class=\"btn btn-primary text-light mt-4\" @click.prevent=\"goCheckout\">前往結帳</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      carts: [],\n      cart: {},\n      isLoading: false,\n      loadingItem: '',\n      code: ''\n    }\n  },\n  created () {\n    this.getCarts()\n  },\n  methods: {\n    getCarts () {\n      this.isLoading = true\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/cart`\n      this.axios.get(api).then((res) => {\n        this.isLoading = false\n        this.carts = res.data.data.carts\n        this.cart = res.data.data\n      })\n    },\n    getProduct (id) {\n      this.$router.push(`/user/product/${id}`)\n    },\n    delCart (item) {\n      this.isLoading = true\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/cart/${item.id}`\n      this.axios.delete(api).then((res) => {\n        this.isLoading = false\n        this.getCarts()\n        this.PushMessageState(res, '刪除')\n        this.emitter.emit('cart-qty')\n      })\n    },\n    updateCart (item) {\n      this.loadingItem = item.id\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/cart/${item.id}`\n      const cart = { product_id: item.id, qty: item.qty }\n      this.axios.put(api, { data: cart }).then((res) => {\n        this.loadingItem = ''\n        this.getCarts()\n      })\n    },\n    useCoupon () {\n      this.isLoading = true\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_API_PATH}/coupon`\n      const code = { code: this.code }\n      this.axios.post(api, { data: code }).then((res) => {\n        this.isLoading = false\n        this.getCarts()\n        this.PushMessageState(res, '套用優惠券')\n      })\n    },\n    goCheckout () {\n      this.$router.push('/user/info')\n    }\n  },\n  inject: ['emitter', 'PushMessageState']\n}\n</script>\n","import { render } from \"./UserCart.vue?vue&type=template&id=07aa6f1c\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/minahu/Documents/front-end engineer/GitHub/vue-assignment/finalproject/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","scope","width","_hoisted_9","colspan","_createVNode","_component_LoadingCom","active","$data","_hoisted_1","_hoisted_2","_createElementBlock","_Fragment","item","key","id","href","onClick","$options","product","style","backgroundImage","imageUrl","title","_hoisted_4","type","min","disabled","onChange","qty","_hoisted_6","unit","_hoisted_7","_ctx","currency","price","_hoisted_11","_hoisted_12","final_total","total","_hoisted_13","_hoisted_14","_hoisted_15","coupon","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","placeholder","onKeyup","_hoisted_22","_hoisted_23","data","carts","cart","isLoading","loadingItem","code","created","this","getCarts","methods","api","axios","get","then","res","getProduct","$router","push","delCart","delete","PushMessageState","emitter","emit","updateCart","product_id","put","useCoupon","post","goCheckout","inject","__exports__","render"],"sourceRoot":""}